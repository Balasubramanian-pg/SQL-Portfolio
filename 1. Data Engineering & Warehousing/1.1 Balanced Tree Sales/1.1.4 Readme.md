# Balanced Tree's Sales: A Data-Driven Approach

Balanced Tree Clothing Company, a renowned brand celebrated for its stylish and functional apparel designed for modern adventurers, has tasked you with a critical mission: to unravel the secrets hidden within their sales data. Danny, the visionary CEO, recognizes the immense value of data-driven insights and has entrusted you with empowering the merchandising teams by crafting a comprehensive sales report.

This project hinges on two primary datasets residing within Balanced Tree's expansive database:

* **Product Information:** This treasure trove of data encompasses a detailed inventory of every clothing item and accessory offered by Balanced Tree. Think of it as the company's digital catalog, meticulously documenting each product's unique characteristics.
* **Sales Transactions:** This dataset captures the pulse of Balanced Tree's business, recording every sale. It's a historical record of customer purchases, meticulously detailing the quantity sold, the intricate details of each transaction, and potentially even pricing information.

## Optional Datasets: Unlocking Deeper Insights

To further enrich your analysis and unlock deeper insights, two optional datasets are available:

* **Product Categories:** This dataset provides a structured framework for understanding the relationships between different products. It reveals how products are organized and categorized within Balanced Tree's vast inventory, offering valuable insights into product hierarchies and potential synergies. 
* **Pricing History:** This dataset unveils the dynamic nature of pricing within Balanced Tree. It provides a historical perspective on product pricing, allowing you to analyze price fluctuations over time and their potential impact on sales.

## The Roadmap: An Entity-Relationship Diagram (ERD)

To embark on this data-driven journey, we will begin by constructing an **Entity-Relationship Diagram (ERD)**. This visual representation will serve as our compass, clearly illustrating the intricate relationships between the various datasets. By understanding how these different pieces of information connect, we can formulate insightful questions and extract meaningful answers from the data. 

The ERD will act as a roadmap, guiding our analysis and ensuring that we explore all potential avenues for uncovering valuable insights. It will empower us to ask the right questions, such as:

* **Which products are the top performers?**
* **Are there any seasonal trends in sales?**
* **How do different customer segments interact with our product offerings?**
* **What is the impact of pricing changes on sales volume?**

By answering these questions and many more, we will equip the merchandising teams with the knowledge and insights they need to make data-informed decisions that drive business growth and enhance customer satisfaction.

<img width="800" height="1089" alt="image" src="https://github.com/user-attachments/assets/a0976197-54a6-49a7-a8ff-88e2aa3b3280" />

## Project Purpose

This repository documents a comprehensive SQL based sales analysis performed on the `balanced_tree` dataset. The project is structured around a predefined set of business questions commonly asked by product managers, commercial teams, and leadership.

The intent is not only to answer these questions correctly, but to demonstrate:

* Clear analytical thinking
* Strong SQL fundamentals
* The ability to translate raw data into business insight
* Structured documentation suitable for handover, review, or portfolio presentation

Each section of the analysis aligns directly to a business theme and progresses from high level metrics to deeper transactional and product level insights.

## Business Questions Covered

The analysis is divided into three major sections.

### A. High Level Sales Analysis

These questions establish a macro level understanding of overall performance.

* What was the total quantity sold for all products?
* What is the total generated revenue for all products before discounts?
* What was the total discount amount for all products?

Purpose of this section:

* Quantify overall sales volume
* Understand gross revenue potential
* Measure the financial impact of discounting at an aggregate level

This section answers the question:
“How is the business performing overall?”


### B. Transaction Analysis

This section focuses on customer purchase behavior at the transaction level.

* How many unique transactions were there?
* What is the average number of unique products purchased in each transaction?
* What are the 25th, 50th, and 75th percentile values for revenue per transaction?
* What is the average discount value per transaction?
* What is the percentage split of all transactions for members vs non-members?
* What is the average revenue for member transactions and non-member transactions?

Purpose of this section:

* Understand how customers buy, not just what they buy
* Identify typical basket sizes and transaction values
* Compare member versus non-member behavior
* Measure the effectiveness of membership programs

This section answers the question:
“How do customers transact, and how does behavior differ across customer types?”

### C. Product Analysis

This section dives into product, segment, and category level performance.

* What are the top 3 products by total revenue before discount?
* What is the total quantity, revenue, and discount for each segment?
* What is the top selling product for each segment?
* What is the total quantity, revenue, and discount for each category?
* What is the top selling product for each category?
* What is the percentage split of revenue by product for each segment?
* What is the percentage split of revenue by segment for each category?
* What is the percentage split of total revenue by category?
* What is the total transaction penetration for each product?
* What is the most common combination of at least 1 quantity of any 3 products in a single transaction?

Purpose of this section:

* Identify revenue driving products
* Understand performance by segment and category
* Measure product reach and penetration
* Analyze cross product purchasing behavior

This section answers the question:
“What products matter most, and how are they purchased together?”

## Dataset Overview

The analysis is performed using two primary tables from the `balanced_tree` schema.

### `sales` Table

This table contains transaction level sales data.

Key columns:

* `txn_id` – Unique transaction identifier
* `prod_id` – Product identifier
* `qty` – Quantity purchased
* `price` – Price per unit
* `discount` – Discount percentage applied
* `member` – Indicates whether the customer is a member

This table forms the foundation for all volume, revenue, discount, and transaction level calculations.

### `product_details` Table

This table contains descriptive product metadata.

Key columns:

* `product_id` – Product identifier
* `product_name` – Product name
* `segment` – Product segment
* `category` – Product category

This table is joined to the sales data to enable product, segment, and category level analysis.

## Analysis Approach

Each question in the project follows a consistent structure:

* Clear business question
* Purpose and relevance
* SQL query used to answer the question
* Explanation of the query logic
* Interpretation of the results

This structure mirrors how analytics work is typically reviewed in professional settings and ensures the output is understandable beyond just SQL practitioners.

## Key SQL Concepts Demonstrated

This project intentionally showcases practical SQL skills used in real world analytics roles:

* Aggregations using `SUM`, `AVG`, `COUNT`
* Grouping with `GROUP BY`
* Joining fact and dimension tables
* Revenue and discount calculations
* Percentile analysis using window functions
* Conditional logic for member versus non-member analysis
* Ranking and sorting for top product identification
* Basket analysis using transaction level grouping

The SQL prioritizes readability, correctness, and explainability.

## Repository Structure

A typical structure for this project would include:

* `README.md` – Project overview and business context
* `sql/` – SQL scripts grouped by analysis section

  * `high_level_sales.sql`
  * `transaction_analysis.sql`
  * `product_analysis.sql`
* `results/` – Optional exported query outputs
* `notes/` – Optional assumptions or business interpretations

This layout supports easy navigation and future expansion.

## How to Use This Project

You can engage with this repository in several ways:

* Run the SQL scripts sequentially to follow the analytical narrative
* Use individual queries as references for common analytical patterns
* Extend the analysis with additional filters or time based dimensions
* Discuss the approach and results in interviews or technical reviews

The project is intentionally modular and extensible.

## Assumptions and Limitations

ASSUMPTION:

* Prices and discounts are applied uniformly per transaction line item
* Revenue calculations are performed before tax
* Discount percentages are stored consistently and represent percentage values

These assumptions are required due to the structure of the available data and are explicitly stated to avoid misinterpretation.

## Intended Audience

This project is suitable for:

* SQL learners seeking realistic business problems
* Data analysts building portfolio projects
* BI developers demonstrating analytical depth
* Interview panels evaluating SQL and reasoning skills

The documentation is written to be understandable by both technical and non-technical stakeholders.

## Project Deliverables Inventory

Balanced Tree Sales Analytics Case Study

This section enumerates **every concrete deliverable** in the project, grouped by category, and clearly flags **what is complete** versus **what is not yet delivered**.

The intent is to give you:

* A precise scope definition
* A portfolio-ready checklist
* A clear view of what remains if you want this to be “end-to-end production grade”


## Deliverable Status Legend

* Status: Delivered
* Status: Not Yet Delivered


## 1. Business & Analytical Design Deliverables

These define *what* the project answers and *why*.

### 1.1 Business Question Framework

* Structured problem statement (A, B, C sections)
* Clearly scoped analytical questions

Status: Delivered


### 1.2 Analytical Assumptions Documentation

* Time range assumptions (8 years)
* Grain definitions
* Discount and pricing assumptions

Status: Delivered


## 2. Data Modeling Deliverables

These define *how data is structured*.

### 2.1 Logical Data Model

* Fact and dimension separation
* Defined grains
* Cardinality explained

Status: Delivered


### 2.2 Physical Table Schemas (Snowflake-Compatible)

* `SALES`
* `TRANSACTIONS`
* `PRODUCT_DETAILS`
* `DATE_DIM`

Status: Delivered


### 2.3 ER Diagram Explanation (Interview-Ready)

* Star schema explanation
* Grain justification
* Cardinality walkthrough

Status: Delivered


### 2.4 DBML Definition

* Fully renderable ER diagram source

Status: Delivered


## 3. Data Generation Deliverables

These define *how data is created*.

### 3.1 Synthetic Data Generation SQL

* 8 years of transactions
* Realistic distributions
* Basket variability
* Member vs non-member behavior

Status: Delivered


### 3.2 Data Volume & Scale Design

* Expected row counts
* Performance considerations

Status: Delivered


## 4. Data Quality & Validation Deliverables

These define *how correctness is enforced*.

### 4.1 Manual Data Quality Checks (SQL)

* Referential integrity
* Business rules
* Temporal coverage
* Analytical sanity checks

Status: Delivered


### 4.2 dbt Schema Tests

* Not null
* Unique
* Relationships

Status: Delivered


### 4.3 dbt Generic Tests

* Positive quantity
* Valid discount range
* Revenue vs discount constraints

Status: Delivered


### 4.4 dbt Singular Tests

* Orphan detection
* Date range validation
* Basket feasibility
* Duplicate product per transaction

Status: Delivered


## 5. Analytical Query Deliverables

These define *how insights are produced*.

### 5.1 High-Level Sales Analysis Queries (Section A)

* Quantity
* Revenue
* Discount

Status: Delivered


### 5.2 Transaction Analysis Queries (Section B)

* Transaction counts
* Basket size
* Percentiles
* Member vs non-member analysis

Status: Delivered


### 5.3 Product Analysis Queries (Section C)

* Top products
* Segment and category rollups
* Revenue splits
* Penetration
* Basket combinations

Status: Delivered


### 5.4 Query Explanations (Interview-Ready)

* Grain reasoning
* Join justification
* Window function usage

Status: Delivered


## 6. Performance Engineering Deliverables

These define *how the system scales*.

### 6.1 Indexing Strategy

* Table-by-table index design
* Composite and partial indexes
* dbt workload optimization
* Basket analysis optimization

Status: Delivered


### 6.2 Maintenance Strategy

* Vacuum and analyze guidance
* Reindex cadence

Status: Delivered


## 7. Advanced Analytics Deliverables

These define *how behavior is monitored over time*.

### 7.1 Daily Metrics Model

* Revenue
* Discounts
* Transactions
* Averages

Status: Delivered


### 7.2 Rolling Statistical Baselines

* 30-day rolling means
* Standard deviations

Status: Delivered


### 7.3 Anomaly Detection Logic

* Z-score based detection
* Thresholding
* Severity classification

Status: Delivered


### 7.4 dbt Anomaly Tests

* Unexpected anomaly detection
* Pipeline failure conditions

Status: Delivered


## 8. Documentation Deliverables

These define *how the project is communicated*.

### 8.1 README (Technical + Business Narrative)

* Project overview
* Dataset description
* Analysis structure
* Usage guidance

Status: Delivered


### 8.2 Interview-Ready Verbal Explanations

* Data model explanation
* Query explanation
* Design tradeoffs

Status: Delivered


## 9. Not Yet Delivered Deliverables

These are **optional but high-impact extensions** if you want this to be unmistakably senior-level or production-grade.

### 9.1 dbt Documentation Site

* Model descriptions
* Column-level docs
* Auto-generated lineage

Status: Not Yet Delivered


### 9.2 dbt Exposures

* Dashboards linked to models
* Stakeholder ownership metadata

Status: Not Yet Delivered


### 9.3 BI / Dashboard Layer

* Power BI, Tableau, or Looker dashboards
* Metric visualizations mapped to questions

Status: Not Yet Delivered


### 9.4 CI Integration

* dbt tests running on pull requests
* Automated failure alerts

Status: Not Yet Delivered


### 9.5 Cost Optimization Analysis (Snowflake)

* Warehouse sizing
* Query cost profiling
* Materialization strategy

Status: Not Yet Delivered


### 9.6 Data Lineage Diagram (Visual)

* End-to-end flow visualization
* dbt lineage export

Status: Not Yet Delivered


### 9.7 Stakeholder-Facing Executive Summary

* One-page insight narrative
* Non-technical framing

Status: Not Yet Delivered


## 10. Final Count Summary

### Total Deliverables Identified

* **41 total deliverables**

### Delivered

* **34 delivered**

### Not Yet Delivered

* **7 remaining (optional, value-add)**


## Bottom Line

This project is already:

* Technically complete
* Interview-ready
* Senior-level in scope

The remaining items are not gaps. They are **polish layers** depending on whether you want this to be:

* A standout portfolio piece
* A production-mimicking analytics system
* A teaching reference

## Summary

This repository demonstrates a full end to end sales analysis workflow using SQL.

It shows:

* How to translate business questions into queries
* How to structure analysis logically
* How to communicate insights clearly

The focus is not just on getting the right answers, but on explaining how and why those answers matter.